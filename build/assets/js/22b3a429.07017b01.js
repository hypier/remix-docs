"use strict";(self.webpackChunkremix_docs=self.webpackChunkremix_docs||[]).push([[3670],{1782:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>u,frontMatter:()=>t,metadata:()=>l,toc:()=>c});var r=i(4848),s=i(8453);const t={title:"vite.config.ts"},d="vite.config.ts",l={id:"file-conventions/vite-config",title:"vite.config.ts",description:"\u5982\u679c\u60a8\u7684\u9879\u76ee\u4ecd\u5728\u4f7f\u7528 Classic Remix Compiler\uff0c\u8bf7\u53c2\u8003 remix.config.js documentation\u3002",source:"@site/docs/file-conventions/vite-config.md",sourceDirName:"file-conventions",slug:"/file-conventions/vite-config",permalink:"/docs/file-conventions/vite-config",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/file-conventions/vite-config.md",tags:[],version:"current",frontMatter:{title:"vite.config.ts"},sidebar:"tutorialSidebar",previous:{title:"\u8def\u7531\u6587\u4ef6\u547d\u540d",permalink:"/docs/file-conventions/routes"},next:{title:"\u8def\u7531\u6a21\u5757",permalink:"/docs/category/\u8def\u7531\u6a21\u5757"}},o={},c=[{value:"Remix Vite \u63d2\u4ef6\u914d\u7f6e",id:"remix-vite-\u63d2\u4ef6\u914d\u7f6e",level:2},{value:"appDirectory",id:"appdirectory",level:4},{value:"future",id:"future",level:4},{value:"ignoredRouteFiles",id:"ignoredroutefiles",level:4},{value:"routes",id:"routes",level:4},{value:"serverModuleFormat",id:"servermoduleformat",level:4},{value:"buildDirectory",id:"builddirectory",level:4},{value:"basename",id:"basename",level:4},{value:"buildEnd",id:"buildend",level:4},{value:"manifest",id:"manifest",level:4},{value:"presets",id:"presets",level:4},{value:"serverBuildFile",id:"serverbuildfile",level:4},{value:"serverBundles",id:"serverbundles",level:4}];function a(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h4:"h4",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"viteconfigts",children:"vite.config.ts"})}),"\n",(0,r.jsxs)("docs-warning",{children:["\u5982\u679c\u60a8\u7684\u9879\u76ee\u4ecd\u5728\u4f7f\u7528 ",(0,r.jsx)(n.a,{href:"../guides/vite#classic-remix-compiler-vs-remix-vite",children:"Classic Remix Compiler"}),"\uff0c\u8bf7\u53c2\u8003 ",(0,r.jsx)(n.a,{href:"./remix-config",children:"remix.config.js documentation"}),"\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:["Remix \u4f7f\u7528 ",(0,r.jsx)(n.a,{href:"https://vitejs.dev",children:"Vite"})," \u6765\u7f16\u8bd1\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u3002\u60a8\u9700\u8981\u63d0\u4f9b\u4e00\u4e2a\u5305\u542b Remix Vite \u63d2\u4ef6\u7684 Vite \u914d\u7f6e\u6587\u4ef6\u3002\u4ee5\u4e0b\u662f\u60a8\u9700\u8981\u7684\u6700\u4f4e\u914d\u7f6e\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:"filename=vite.config.ts",children:'import { vitePlugin as remix } from "@remix-run/dev";\nimport { defineConfig } from "vite";\n\nexport default defineConfig({\n  plugins: [remix()],\n});\n'})}),"\n",(0,r.jsxs)("docs-info",{children:["Vite \u652f\u6301\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:".js"})," \u6587\u4ef6\u4f5c\u4e3a\u60a8\u7684\u914d\u7f6e\uff0c\u4f46\u6211\u4eec\u5efa\u8bae\u4f7f\u7528 TypeScript \u6765\u5e2e\u52a9\u786e\u4fdd\u60a8\u7684\u914d\u7f6e\u6709\u6548\u3002"]}),"\n",(0,r.jsx)(n.h2,{id:"remix-vite-\u63d2\u4ef6\u914d\u7f6e",children:"Remix Vite \u63d2\u4ef6\u914d\u7f6e"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",metastring:"filename=vite.config.ts",children:'import { vitePlugin as remix } from "@remix-run/dev";\nimport { defineConfig } from "vite";\n\nexport default defineConfig({\n  plugins: [\n    remix({\n      basename: "/",\n      buildDirectory: "build",\n      future: {\n        /* \u4efb\u4f55\u542f\u7528\u7684\u672a\u6765\u6807\u5fd7 */\n      },\n      ignoredRouteFiles: ["**/*.css"],\n      routes(defineRoutes) {\n        return defineRoutes((route) => {\n          route("/somewhere/cool/*", "catchall.tsx");\n        });\n      },\n      serverBuildFile: "index.js",\n    }),\n  ],\n});\n'})}),"\n",(0,r.jsx)(n.h4,{id:"appdirectory",children:"appDirectory"}),"\n",(0,r.jsxs)(n.p,{children:["\u76f8\u5bf9\u4e8e\u9879\u76ee\u6839\u76ee\u5f55\u7684 ",(0,r.jsx)(n.code,{children:"app"})," \u76ee\u5f55\u8def\u5f84\u3002\u9ed8\u8ba4\u4e3a\n",(0,r.jsx)(n.code,{children:'"app"'}),"\u3002"]}),"\n",(0,r.jsx)(n.h4,{id:"future",children:"future"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"future"})," \u914d\u7f6e\u5141\u8bb8\u60a8\u901a\u8fc7 ",(0,r.jsx)(n.a,{href:"../start/future-flags",children:"Future Flags"})," \u9009\u62e9\u672a\u6765\u7684\u91cd\u5927\u66f4\u6539\u3002"]}),"\n",(0,r.jsx)(n.h4,{id:"ignoredroutefiles",children:"ignoredRouteFiles"}),"\n",(0,r.jsxs)(n.p,{children:["\u8fd9\u662f\u4e00\u4e2a\u901a\u8fc7 ",(0,r.jsx)(n.a,{href:"https://npm.im/minimatch",children:"minimatch"})," \u5339\u914d\u7684\u6587\u4ef6\u6570\u7ec4\uff0cRemix \u5728\u8bfb\u53d6\u60a8\u7684 ",(0,r.jsx)(n.code,{children:"app/routes"})," \u76ee\u5f55\u65f6\u5c06\u5339\u914d\u8fd9\u4e9b\u6587\u4ef6\u3002\u5982\u679c\u6587\u4ef6\u5339\u914d\uff0c\u5b83\u5c06\u88ab\u5ffd\u7565\uff0c\u800c\u4e0d\u662f\u88ab\u89c6\u4e3a\u8def\u7531\u6a21\u5757\u3002\u8fd9\u5bf9\u4e8e\u5ffd\u7565\u60a8\u5e0c\u671b\u5171\u5b58\u7684 CSS/\u6d4b\u8bd5\u6587\u4ef6\u975e\u5e38\u6709\u7528\u3002"]}),"\n",(0,r.jsx)(n.h4,{id:"routes",children:"routes"}),"\n",(0,r.jsxs)(n.p,{children:["\u4e00\u4e2a\u7528\u4e8e\u5b9a\u4e49\u81ea\u5b9a\u4e49\u8def\u7531\u7684\u51fd\u6570\uff0c\u9664\u4e86\u5df2\u7ecf\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"app/routes"})," \u4e2d\u7684\u6587\u4ef6\u7cfb\u7edf\u7ea6\u5b9a\u5b9a\u4e49\u7684\u8def\u7531\u3002\u4e24\u7ec4\u8def\u7531\u5c06\u88ab\u5408\u5e76\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:"filename=vite.config.ts",children:'import { vitePlugin as remix } from "@remix-run/dev";\nimport { defineConfig } from "vite";\n\nexport default defineConfig({\n  plugins: [\n    remix({\n      routes: async (defineRoutes) => {\n        // \u5982\u679c\u60a8\u9700\u8981\u8fdb\u884c\u5f02\u6b65\u5de5\u4f5c\uff0c\u8bf7\u5728\u8c03\u7528 `defineRoutes` \u4e4b\u524d\u5b8c\u6210\uff0c\u6211\u4eec\u4f7f\u7528\n        // `route` \u5185\u90e8\u7684\u8c03\u7528\u6808\u6765\u8bbe\u7f6e\u5d4c\u5957\u3002\n\n        return defineRoutes((route) => {\n          // \u8fd9\u5e38\u7528\u4e8e\u901a\u914d\u8def\u7531\u3002\n          // - \u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u8981\u5339\u914d\u7684 React Router \u8def\u5f84\n          // - \u7b2c\u4e8c\u4e2a\u662f\u8def\u7531\u5904\u7406\u7a0b\u5e8f\u7684\u76f8\u5bf9\u6587\u4ef6\u540d\n          route("/some/path/*", "catchall.tsx");\n\n          // \u5982\u679c\u60a8\u60f3\u5d4c\u5957\u8def\u7531\uff0c\u8bf7\u4f7f\u7528\u53ef\u9009\u7684\u56de\u8c03\u53c2\u6570\n          route("some/:path", "some/route/file.js", () => {\n            // - path \u76f8\u5bf9\u4e8e\u7236\u8def\u5f84\n            // - \u6587\u4ef6\u540d\u4ecd\u7136\u76f8\u5bf9\u4e8e\u5e94\u7528\u7a0b\u5e8f\u76ee\u5f55\n            route("relative/path", "some/other/file");\n          });\n        });\n      },\n    }),\n  ],\n});\n'})}),"\n",(0,r.jsx)(n.h4,{id:"servermoduleformat",children:"serverModuleFormat"}),"\n",(0,r.jsxs)(n.p,{children:["\u670d\u52a1\u5668\u6784\u5efa\u7684\u8f93\u51fa\u683c\u5f0f\uff0c\u53ef\u4ee5\u662f ",(0,r.jsx)(n.code,{children:'"cjs"'})," \u6216 ",(0,r.jsx)(n.code,{children:'"esm"'}),"\u3002\u9ed8\u8ba4\u4e3a ",(0,r.jsx)(n.code,{children:'"esm"'}),"\u3002"]}),"\n",(0,r.jsx)(n.h4,{id:"builddirectory",children:"buildDirectory"}),"\n",(0,r.jsxs)(n.p,{children:["\u76f8\u5bf9\u4e8e\u9879\u76ee\u6839\u76ee\u5f55\u7684\u6784\u5efa\u76ee\u5f55\u8def\u5f84\u3002\u9ed8\u8ba4\u4e3a\n",(0,r.jsx)(n.code,{children:'"build"'}),"\u3002"]}),"\n",(0,r.jsx)(n.h4,{id:"basename",children:"basename"}),"\n",(0,r.jsxs)(n.p,{children:["\u8def\u7531\u8def\u5f84\u7684\u53ef\u9009\u57fa\u672c\u540d\u79f0\uff0c\u901a\u8fc7 ",(0,r.jsx)(n.a,{href:"https://reactrouter.com/routers/create-browser-router#basename",children:'React Router "basename" \u9009\u9879'})," \u4f20\u9012\u3002\u8bf7\u6ce8\u610f\uff0c\u8fd9\u4e0e\u60a8\u7684 ",(0,r.jsx)(n.em,{children:"\u8d44\u4ea7"})," \u8def\u5f84\u4e0d\u540c\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7 ",(0,r.jsx)(n.a,{href:"https://vitejs.dev/config/shared-options.html#base",children:'Vite "base" \u9009\u9879'})," \u914d\u7f6e\u60a8\u7684\u8d44\u4ea7\u7684 ",(0,r.jsx)(n.a,{href:"https://vitejs.dev/config/shared-options.html#base",children:"base public path"}),"\u3002"]}),"\n",(0,r.jsx)(n.h4,{id:"buildend",children:"buildEnd"}),"\n",(0,r.jsx)(n.p,{children:"\u5728\u5b8c\u6574\u7684 Remix \u6784\u5efa\u5b8c\u6210\u540e\u8c03\u7528\u7684\u51fd\u6570\u3002"}),"\n",(0,r.jsx)(n.h4,{id:"manifest",children:"manifest"}),"\n",(0,r.jsxs)(n.p,{children:["\u662f\u5426\u5c06 ",(0,r.jsx)(n.code,{children:".remix/manifest.json"})," \u6587\u4ef6\u5199\u5165\u6784\u5efa\u76ee\u5f55\u3002\u9ed8\u8ba4\u4e3a ",(0,r.jsx)(n.code,{children:"false"}),"\u3002"]}),"\n",(0,r.jsx)(n.h4,{id:"presets",children:"presets"}),"\n",(0,r.jsxs)(n.p,{children:["\u4e00\u4e2a ",(0,r.jsx)(n.a,{href:"../guides/presets",children:"presets"})," \u6570\u7ec4\uff0c\u4ee5\u4fbf\u4e8e\u4e0e\u5176\u4ed6\u5de5\u5177\u548c\u6258\u7ba1\u63d0\u4f9b\u5546\u7684\u96c6\u6210\u3002"]}),"\n",(0,r.jsx)(n.h4,{id:"serverbuildfile",children:"serverBuildFile"}),"\n",(0,r.jsxs)(n.p,{children:["\u5728\u670d\u52a1\u5668\u6784\u5efa\u76ee\u5f55\u4e2d\u751f\u6210\u7684\u670d\u52a1\u5668\u6587\u4ef6\u7684\u540d\u79f0\u3002\u9ed8\u8ba4\u4e3a ",(0,r.jsx)(n.code,{children:'"index.js"'}),"\u3002"]}),"\n",(0,r.jsx)(n.h4,{id:"serverbundles",children:"serverBundles"}),"\n",(0,r.jsxs)(n.p,{children:["\u4e00\u4e2a\u7528\u4e8e\u5c06\u53ef\u5bfb\u5740\u8def\u7531\u5206\u914d\u7ed9 ",(0,r.jsx)(n.a,{href:"../guides/server-bundles",children:"server bundles"})," \u7684\u51fd\u6570\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:["\u60a8\u53ef\u80fd\u8fd8\u60f3\u542f\u7528 ",(0,r.jsx)(n.code,{children:"manifest"})," \u9009\u9879\uff0c\u56e0\u4e3a\u5f53\u542f\u7528\u670d\u52a1\u5668\u5305\u65f6\uff0c\u5b83\u5305\u542b\u8def\u7531\u4e0e\u670d\u52a1\u5668\u5305\u4e4b\u95f4\u7684\u6620\u5c04\u3002"]})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>l});var r=i(6540);const s={},t=r.createContext(s);function d(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);