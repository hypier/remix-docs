"use strict";(self.webpackChunkremix_docs=self.webpackChunkremix_docs||[]).push([[8639],{1656:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>l,toc:()=>a});var s=r(4848),c=r(8453);const o={title:"\u7b49\u5f85"},i="<Await>",l={id:"components/await",title:"\u7b49\u5f85",description:"\u8981\u5f00\u59cb\u6d41\u5f0f\u6570\u636e\u5904\u7406\uff0c\u8bf7\u67e5\u770b\u6d41\u5f0f\u6307\u5357\u3002",source:"@site/docs/components/await.md",sourceDirName:"components",slug:"/components/await",permalink:"/docs/components/await",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/components/await.md",tags:[],version:"current",frontMatter:{title:"\u7b49\u5f85"},sidebar:"tutorialSidebar",previous:{title:"\u7ec4\u4ef6",permalink:"/docs/category/\u7ec4\u4ef6"},next:{title:"\u8868\u5355",permalink:"/docs/components/form"}},d={},a=[{value:"\u9053\u5177",id:"\u9053\u5177",level:2},{value:"<code>resolve</code>",id:"resolve",level:3},{value:"<code>children</code>",id:"children",level:3},{value:"<code>errorElement</code>",id:"errorelement",level:3}];function t(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,c.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"await",children:(0,s.jsx)(n.code,{children:"<Await>"})})}),"\n",(0,s.jsxs)(n.p,{children:["\u8981\u5f00\u59cb\u6d41\u5f0f\u6570\u636e\u5904\u7406\uff0c\u8bf7\u67e5\u770b",(0,s.jsx)(n.a,{href:"../guides/streaming",children:"\u6d41\u5f0f\u6307\u5357"}),"\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"<Await>"}),"\u7ec4\u4ef6\u8d1f\u8d23\u89e3\u6790\u4ece",(0,s.jsx)(n.a,{href:"../hooks/use-loader-data",children:(0,s.jsx)(n.code,{children:"useLoaderData"})}),"\u8bbf\u95ee\u7684\u5ef6\u8fdf\u52a0\u8f7d\u5668\u627f\u8bfa\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'import { Await } from "@remix-run/react";\n\n<Suspense fallback={<div>Loading...</div>}>\n  <Await resolve={somePromise}>\n    {(resolvedValue) => <p>{resolvedValue}</p>}\n  </Await>\n</Suspense>;\n'})}),"\n",(0,s.jsx)(n.h2,{id:"\u9053\u5177",children:"\u9053\u5177"}),"\n",(0,s.jsx)(n.h3,{id:"resolve",children:(0,s.jsx)(n.code,{children:"resolve"})}),"\n",(0,s.jsxs)(n.p,{children:["resolve \u5c5e\u6027\u63a5\u53d7\u4e00\u4e2a\u6765\u81ea ",(0,s.jsx)(n.a,{href:"../hooks/use-loader-data",children:(0,s.jsx)(n.code,{children:"useLoaderData"})})," \u7684 promise\uff0c\u5f53\u6570\u636e\u6d41\u5165\u65f6\u8fdb\u884c\u89e3\u6790\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"<Await resolve={somePromise} />\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u5f53 promise \u5c1a\u672a\u89e3\u6790\u65f6\uff0c\u5c06\u5448\u73b0\u7236\u7ea7 suspense \u8fb9\u754c\u7684\u5907\u7528\u5185\u5bb9\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"<Suspense fallback={<div>Loading...</div>}>\n  <Await resolve={somePromise} />\n</Suspense>\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u5f53 promise \u88ab\u89e3\u6790\u65f6\uff0c\u5c06\u5448\u73b0 ",(0,s.jsx)(n.code,{children:"children"}),"\u3002"]}),"\n",(0,s.jsx)(n.h3,{id:"children",children:(0,s.jsx)(n.code,{children:"children"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"children"})," \u53ef\u4ee5\u662f\u4e00\u4e2a\u6e32\u67d3\u56de\u8c03\u6216\u4e00\u4e2a React \u5143\u7d20\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"<Await resolve={somePromise}>\n  {(resolvedValue) => <p>{resolvedValue}</p>}\n</Await>\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u5982\u679c ",(0,s.jsx)(n.code,{children:"children"})," \u5c5e\u6027\u662f\u4e00\u4e2a React \u5143\u7d20\uff0c\u89e3\u6790\u540e\u7684\u503c\u5c06\u53ef\u4ee5\u901a\u8fc7 ",(0,s.jsx)(n.a,{href:"../hooks/use-async-value",children:(0,s.jsx)(n.code,{children:"useAsyncValue"})})," \u5728\u5b50\u6811\u4e2d\u8bbf\u95ee\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"<Await resolve={somePromise}>\n  <SomeChild />\n</Await>\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'import { useAsyncValue } from "@remix-run/react";\n\nfunction SomeChild() {\n  const value = useAsyncValue();\n  return <p>{value}</p>;\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"errorelement",children:(0,s.jsx)(n.code,{children:"errorElement"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"errorElement"})," \u5c5e\u6027\u53ef\u7528\u4e8e\u5728 Promise \u62d2\u7edd\u65f6\u6e32\u67d3\u9519\u8bef\u8fb9\u754c\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"<Await errorElement={<div>Oops!</div>} />\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u53ef\u4ee5\u5728\u5b50\u6811\u4e2d\u4f7f\u7528 ",(0,s.jsx)(n.a,{href:"../hooks/use-async-error",children:(0,s.jsx)(n.code,{children:"useAsyncError"})})," \u8bbf\u95ee\u9519\u8bef"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"<Await errorElement={<SomeChild />} />\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'import { useAsyncError } from "@remix-run/react";\n\nfunction SomeChild() {\n  const error = useAsyncError();\n  return <p>{error.message}</p>;\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>l});var s=r(6540);const c={},o=s.createContext(c);function i(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:i(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);