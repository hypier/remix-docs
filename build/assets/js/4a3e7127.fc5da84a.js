"use strict";(self.webpackChunkremix_docs=self.webpackChunkremix_docs||[]).push([[6251],{5156:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>l});var t=r(4848),i=r(8453);const o={title:"\u6570\u636e\u5199\u5165"},s="\u6570\u636e\u5199\u5165",a={id:"guides/data-writes",title:"\u6570\u636e\u5199\u5165",description:"\u5728 Remix \u4e2d\uff0c\u6570\u636e\u5199\u5165\uff08\u6709\u4e9b\u4eba\u79f0\u4e4b\u4e3a\u53d8\u66f4\uff09\u662f\u5efa\u7acb\u5728\u4e24\u4e2a\u57fa\u672c\u7684 web API \u4e4b\u4e0a\u7684\uff1a`` \u548c HTTP\u3002\u7136\u540e\uff0c\u6211\u4eec\u4f7f\u7528\u6e10\u8fdb\u589e\u5f3a\u6765\u542f\u7528\u4e50\u89c2 UI\u3001\u52a0\u8f7d\u6307\u793a\u5668\u548c\u9a8c\u8bc1\u53cd\u9988\u2014\u2014\u4f46\u7f16\u7a0b\u6a21\u578b\u4ecd\u7136\u662f\u57fa\u4e8e HTML \u8868\u5355\u7684\u3002",source:"@site/docs/guides/data-writes.md",sourceDirName:"guides",slug:"/guides/data-writes",permalink:"/docs/guides/data-writes",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/guides/data-writes.md",tags:[],version:"current",frontMatter:{title:"\u6570\u636e\u5199\u5165"},sidebar:"tutorialSidebar",previous:{title:"\u6570\u636e\u52a0\u8f7d",permalink:"/docs/guides/data-loading"},next:{title:"\u8c03\u8bd5",permalink:"/docs/guides/debugging"}},c={},l=[{value:"\u666e\u901a HTML \u8868\u5355",id:"\u666e\u901a-html-\u8868\u5355",level:2},{value:"HTML \u8868\u5355 HTTP \u52a8\u8bcd",id:"html-\u8868\u5355-http-\u52a8\u8bcd",level:3},{value:"HTML \u8868\u5355 GET",id:"html-\u8868\u5355-get",level:3},{value:"HTML \u8868\u5355 POST",id:"html-\u8868\u5355-post",level:3},{value:"Remix Mutation, Start to Finish",id:"remix-mutation-start-to-finish",level:2},{value:"\u6784\u5efa\u8868\u5355",id:"\u6784\u5efa\u8868\u5355",level:3},{value:"\u8868\u5355\u9a8c\u8bc1",id:"\u8868\u5355\u9a8c\u8bc1",level:3},{value:"\u5c06 <code>&lt;form&gt;</code> \u5347\u7ea7\u4e3a <code>&lt;Form&gt;</code> \u5e76\u6dfb\u52a0\u5f85\u5904\u7406 UI",id:"\u5c06-form-\u5347\u7ea7\u4e3a-form-\u5e76\u6dfb\u52a0\u5f85\u5904\u7406-ui",level:3},{value:"\u5728\u9a8c\u8bc1\u9519\u8bef\u4e2d\u52a8\u753b\u6548\u679c",id:"\u5728\u9a8c\u8bc1\u9519\u8bef\u4e2d\u52a8\u753b\u6548\u679c",level:3},{value:"\u56de\u987e",id:"\u56de\u987e",level:3},{value:"\u53e6\u89c1",id:"\u53e6\u89c1",level:2}];function d(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"\u6570\u636e\u5199\u5165",children:"\u6570\u636e\u5199\u5165"})}),"\n",(0,t.jsxs)(e.p,{children:["\u5728 Remix \u4e2d\uff0c\u6570\u636e\u5199\u5165\uff08\u6709\u4e9b\u4eba\u79f0\u4e4b\u4e3a\u53d8\u66f4\uff09\u662f\u5efa\u7acb\u5728\u4e24\u4e2a\u57fa\u672c\u7684 web API \u4e4b\u4e0a\u7684\uff1a",(0,t.jsx)(e.code,{children:"<form>"})," \u548c HTTP\u3002\u7136\u540e\uff0c\u6211\u4eec\u4f7f\u7528\u6e10\u8fdb\u589e\u5f3a\u6765\u542f\u7528\u4e50\u89c2 UI\u3001\u52a0\u8f7d\u6307\u793a\u5668\u548c\u9a8c\u8bc1\u53cd\u9988\u2014\u2014\u4f46\u7f16\u7a0b\u6a21\u578b\u4ecd\u7136\u662f\u57fa\u4e8e HTML \u8868\u5355\u7684\u3002"]}),"\n",(0,t.jsx)(e.p,{children:"\u5f53\u7528\u6237\u63d0\u4ea4\u8868\u5355\u65f6\uff0cRemix \u5c06\u4f1a\uff1a"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsx)(e.li,{children:"\u8c03\u7528\u8868\u5355\u7684 action"}),"\n",(0,t.jsx)(e.li,{children:"\u91cd\u65b0\u52a0\u8f7d\u9875\u9762\u4e0a\u6240\u6709\u8def\u7531\u7684\u6240\u6709\u6570\u636e"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:"\u5f88\u591a\u65f6\u5019\uff0c\u4eba\u4eec\u4f1a\u5728 React \u4e2d\u4f7f\u7528\u5168\u5c40\u72b6\u6001\u7ba1\u7406\u5e93\uff0c\u5982 redux\u3001\u6570\u636e\u5e93\uff0c\u5982 apollo\uff0c\u4ee5\u53ca fetch \u5c01\u88c5\u5e93\uff0c\u5982 React Query\uff0c\u4ee5\u5e2e\u52a9\u7ba1\u7406\u5c06\u670d\u52a1\u5668\u72b6\u6001\u5f15\u5165\u7ec4\u4ef6\u5e76\u5728\u7528\u6237\u66f4\u6539\u65f6\u4fdd\u6301 UI \u540c\u6b65\u3002Remix \u7684\u57fa\u4e8e HTML \u7684 API \u66ff\u4ee3\u4e86\u8fd9\u4e9b\u5de5\u5177\u7684\u5927\u591a\u6570\u4f7f\u7528\u573a\u666f\u3002\u4f7f\u7528\u6807\u51c6 HTML API \u65f6\uff0cRemix \u77e5\u9053\u5982\u4f55\u52a0\u8f7d\u6570\u636e\u4ee5\u53ca\u5728\u6570\u636e\u66f4\u6539\u540e\u5982\u4f55\u91cd\u65b0\u9a8c\u8bc1\u5b83\u3002"}),"\n",(0,t.jsx)(e.p,{children:"\u6709\u51e0\u79cd\u65b9\u6cd5\u53ef\u4ee5\u8c03\u7528 action \u5e76\u4f7f\u8def\u7531\u91cd\u65b0\u9a8c\u8bc1\uff1a"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"../components/form",children:(0,t.jsx)(e.code,{children:"<Form>"})})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"../hooks/use-submit",children:(0,t.jsx)(e.code,{children:"useSubmit()"})})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"../hooks/use-fetcher",children:(0,t.jsx)(e.code,{children:"useFetcher()"})})}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:["\u672c\u6307\u5357\u4ec5\u6db5\u76d6 ",(0,t.jsx)(e.code,{children:"<Form>"}),"\u3002\u6211\u4eec\u5efa\u8bae\u60a8\u5728\u9605\u8bfb\u5b8c\u672c\u6307\u5357\u540e\u67e5\u770b\u5176\u4ed6\u4e24\u4e2a\u7684\u6587\u6863\uff0c\u4ee5\u4e86\u89e3\u5982\u4f55\u4f7f\u7528\u5b83\u4eec\u3002\u672c\u6307\u5357\u7684\u5927\u90e8\u5206\u5185\u5bb9\u9002\u7528\u4e8e ",(0,t.jsx)(e.code,{children:"useSubmit"}),"\uff0c\u4f46 ",(0,t.jsx)(e.code,{children:"useFetcher"})," \u7a0d\u6709\u4e0d\u540c\u3002"]}),"\n",(0,t.jsx)(e.h2,{id:"\u666e\u901a-html-\u8868\u5355",children:"\u666e\u901a HTML \u8868\u5355"}),"\n",(0,t.jsxs)(e.p,{children:["\u5728\u4e0e\u6211\u4eec\u516c\u53f8 ",(0,t.jsx)("a",{href:"https://reacttraining.com",children:"React Training"})," \u4e3e\u529e\u4e86\u591a\u5e74\u7684\u5de5\u4f5c\u574a\u540e\uff0c\u6211\u4eec\u53d1\u73b0\u8bb8\u591a\u65b0\u624b\u7f51\u9875\u5f00\u53d1\u8005\uff08\u867d\u7136\u8fd9\u5e76\u4e0d\u662f\u4ed6\u4eec\u7684\u9519\uff09\u5b9e\u9645\u4e0a\u5e76\u4e0d\u77e5\u9053 ",(0,t.jsx)(e.code,{children:"<form>"})," \u662f\u5982\u4f55\u5de5\u4f5c\u7684\uff01"]}),"\n",(0,t.jsxs)(e.p,{children:["\u7531\u4e8e Remix ",(0,t.jsx)(e.code,{children:"<Form>"})," \u7684\u5de5\u4f5c\u65b9\u5f0f\u4e0e ",(0,t.jsx)(e.code,{children:"<form>"})," \u5b8c\u5168\u76f8\u540c\uff08\u5e76\u4e14\u6709\u4e00\u4e9b\u989d\u5916\u7684\u529f\u80fd\u7528\u4e8e\u4e50\u89c2 UI \u7b49\uff09\uff0c\u6211\u4eec\u5c06\u590d\u4e60\u4e00\u4e0b\u666e\u901a\u7684 HTML \u8868\u5355\uff0c\u8fd9\u6837\u4f60\u53ef\u4ee5\u540c\u65f6\u5b66\u4e60 HTML \u548c Remix\u3002"]}),"\n",(0,t.jsx)(e.h3,{id:"html-\u8868\u5355-http-\u52a8\u8bcd",children:"HTML \u8868\u5355 HTTP \u52a8\u8bcd"}),"\n",(0,t.jsxs)(e.p,{children:["\u539f\u751f\u8868\u5355\u652f\u6301\u4e24\u79cd HTTP \u52a8\u8bcd\uff1a",(0,t.jsx)(e.code,{children:"GET"})," \u548c ",(0,t.jsx)(e.code,{children:"POST"}),"\u3002Remix \u4f7f\u7528\u8fd9\u4e9b\u52a8\u8bcd\u6765\u7406\u89e3\u60a8\u7684\u610f\u56fe\u3002\u5982\u679c\u662f GET\uff0cRemix \u5c06\u786e\u5b9a\u9875\u9762\u4e2d\u54ea\u4e9b\u90e8\u5206\u6b63\u5728\u53d8\u5316\uff0c\u4ec5\u83b7\u53d6\u53d8\u5316\u5e03\u5c40\u7684\u6570\u636e\uff0c\u5e76\u5bf9\u672a\u53d8\u5316\u7684\u5e03\u5c40\u4f7f\u7528\u7f13\u5b58\u6570\u636e\u3002\u5f53\u662f POST \u65f6\uff0cRemix \u5c06\u91cd\u65b0\u52a0\u8f7d\u6240\u6709\u6570\u636e\uff0c\u4ee5\u786e\u4fdd\u6355\u83b7\u670d\u52a1\u5668\u7684\u66f4\u65b0\u3002\u6211\u4eec\u6765\u770b\u770b\u8fd9\u4e24\u79cd\u60c5\u51b5\u3002"]}),"\n",(0,t.jsx)(e.h3,{id:"html-\u8868\u5355-get",children:"HTML \u8868\u5355 GET"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.code,{children:"GET"})," \u53ea\u662f\u4e00\u4e2a\u666e\u901a\u7684\u5bfc\u822a\uff0c\u5176\u4e2d\u8868\u5355\u6570\u636e\u901a\u8fc7 URL \u67e5\u8be2\u53c2\u6570\u4f20\u9012\u3002\u60a8\u53ef\u4ee5\u5c06\u5176\u7528\u4e8e\u6b63\u5e38\u5bfc\u822a\uff0c\u5c31\u50cf ",(0,t.jsx)(e.code,{children:"<a>"})," \u4e00\u6837\uff0c\u53ea\u4e0d\u8fc7\u7528\u6237\u901a\u8fc7\u8868\u5355\u63d0\u4f9b\u67e5\u8be2\u53c2\u6570\u4e2d\u7684\u6570\u636e\u3002\u9664\u4e86\u641c\u7d22\u9875\u9762\u5916\uff0c\u5b83\u4e0e ",(0,t.jsx)(e.code,{children:"<form>"})," \u7684\u7ed3\u5408\u4f7f\u7528\u76f8\u5bf9\u8f83\u5c11\u3002"]}),"\n",(0,t.jsx)(e.p,{children:"\u8003\u8651\u4ee5\u4e0b\u8868\u5355\uff1a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-html",children:'<form method="get" action="/search">\n  <label>\u641c\u7d22 <input name="term" type="text" /></label>\n  <button type="submit">\u641c\u7d22</button>\n</form>\n'})}),"\n",(0,t.jsxs)(e.p,{children:["\u5f53\u7528\u6237\u586b\u5199\u5e76\u70b9\u51fb\u63d0\u4ea4\u65f6\uff0c\u6d4f\u89c8\u5668\u4f1a\u81ea\u52a8\u5c06\u8868\u5355\u503c\u5e8f\u5217\u5316\u4e3a URL \u67e5\u8be2\u53c2\u6570\u5b57\u7b26\u4e32\uff0c\u5e76\u5bfc\u822a\u5230\u8868\u5355\u7684 ",(0,t.jsx)(e.code,{children:"action"}),'\uff0c\u5e76\u9644\u52a0\u67e5\u8be2\u5b57\u7b26\u4e32\u3002\u5047\u8bbe\u7528\u6237\u8f93\u5165\u4e86 "remix"\u3002\u6d4f\u89c8\u5668\u5c06\u5bfc\u822a\u5230 ',(0,t.jsx)(e.code,{children:"/search?term=remix"}),"\u3002\u5982\u679c\u6211\u4eec\u5c06\u8f93\u5165\u66f4\u6539\u4e3a ",(0,t.jsx)(e.code,{children:'<input name="q"/>'}),"\uff0c\u90a3\u4e48\u8868\u5355\u5c06\u5bfc\u822a\u5230 ",(0,t.jsx)(e.code,{children:"/search?q=remix"}),"\u3002"]}),"\n",(0,t.jsx)(e.p,{children:"\u8fd9\u4e0e\u6211\u4eec\u521b\u5efa\u7684\u94fe\u63a5\u5177\u6709\u76f8\u540c\u7684\u884c\u4e3a\uff1a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-html",children:'<a href="/search?term=remix">\u641c\u7d22 "remix"</a>\n'})}),"\n",(0,t.jsxs)(e.p,{children:["\u552f\u4e00\u7684\u4e0d\u540c\u5728\u4e8e ",(0,t.jsx)(e.strong,{children:"\u7528\u6237"})," \u63d0\u4f9b\u4e86\u4fe1\u606f\u3002"]}),"\n",(0,t.jsx)(e.p,{children:"\u5982\u679c\u60a8\u6709\u66f4\u591a\u5b57\u6bb5\uff0c\u6d4f\u89c8\u5668\u5c06\u6dfb\u52a0\u5b83\u4eec\uff1a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-html",children:'<form method="get" action="/search">\n  <fieldset>\n    <legend>\u54c1\u724c</legend>\n    <label>\n      <input name="brand" value="nike" type="checkbox" />\n      Nike\n    </label>\n    <label>\n      <input name="brand" value="reebok" type="checkbox" />\n      Reebok\n    </label>\n    <label>\n      <input name="color" value="white" type="checkbox" />\n      \u767d\u8272\n    </label>\n    <label>\n      <input name="color" value="black" type="checkbox" />\n      \u9ed1\u8272\n    </label>\n    <button type="submit">\u641c\u7d22</button>\n  </fieldset>\n</form>\n'})}),"\n",(0,t.jsx)(e.p,{children:"\u6839\u636e\u7528\u6237\u70b9\u51fb\u7684\u590d\u9009\u6846\uff0c\u6d4f\u89c8\u5668\u5c06\u5bfc\u822a\u5230\u5982\u4e0b URL\uff1a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"/search?brand=nike&color=black\n/search?brand=nike&brand=reebok&color=white\n"})}),"\n",(0,t.jsx)(e.h3,{id:"html-\u8868\u5355-post",children:"HTML \u8868\u5355 POST"}),"\n",(0,t.jsx)(e.p,{children:"\u5f53\u60a8\u60f3\u8981\u5728\u7f51\u7ad9\u4e0a\u521b\u5efa\u3001\u5220\u9664\u6216\u66f4\u65b0\u6570\u636e\u65f6\uff0c\u8868\u5355\u63d0\u4ea4\u662f\u6700\u4f73\u9009\u62e9\u3002\u6211\u4eec\u4e0d\u4ec5\u4ec5\u6307\u7528\u6237\u4e2a\u4eba\u8d44\u6599\u7f16\u8f91\u9875\u9762\u8fd9\u6837\u7684\u5927\u8868\u5355\u3002\u5373\u4f7f\u662f\u201c\u559c\u6b22\u201d\u6309\u94ae\u4e5f\u53ef\u4ee5\u901a\u8fc7\u8868\u5355\u6765\u5904\u7406\u3002"}),"\n",(0,t.jsx)(e.p,{children:"\u8ba9\u6211\u4eec\u8003\u8651\u4e00\u4e2a\u201c\u65b0\u9879\u76ee\u201d\u8868\u5355\u3002"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-html",children:'<form method="post" action="/projects">\n  <label><input name="name" type="text" /></label>\n  <label><textarea name="description"></textarea></label>\n  <button type="submit">\u521b\u5efa</button>\n</form>\n'})}),"\n",(0,t.jsx)(e.p,{children:"\u5f53\u7528\u6237\u63d0\u4ea4\u6b64\u8868\u5355\u65f6\uff0c\u6d4f\u89c8\u5668\u4f1a\u5c06\u5b57\u6bb5\u5e8f\u5217\u5316\u4e3a\u8bf7\u6c42\u201c\u4e3b\u4f53\u201d\uff08\u800c\u4e0d\u662f URL \u67e5\u8be2\u53c2\u6570\uff09\uff0c\u5e76\u5c06\u5176\u201cPOST\u201d\u5230\u670d\u52a1\u5668\u3002\u8fd9\u4ecd\u7136\u662f\u6b63\u5e38\u7684\u5bfc\u822a\uff0c\u5c31\u50cf\u7528\u6237\u70b9\u51fb\u4e86\u4e00\u4e2a\u94fe\u63a5\u3002\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\uff1a\u7528\u6237\u63d0\u4f9b\u4e86\u670d\u52a1\u5668\u6240\u9700\u7684\u6570\u636e\uff0c\u6d4f\u89c8\u5668\u5c06\u8bf7\u6c42\u4ee5\u201cPOST\u201d\u800c\u4e0d\u662f\u201cGET\u201d\u7684\u65b9\u5f0f\u53d1\u9001\u3002"}),"\n",(0,t.jsx)(e.p,{children:"\u6570\u636e\u53ef\u4f9b\u670d\u52a1\u5668\u7684\u8bf7\u6c42\u5904\u7406\u7a0b\u5e8f\u4f7f\u7528\uff0c\u56e0\u6b64\u60a8\u53ef\u4ee5\u521b\u5efa\u8bb0\u5f55\u3002\u4e4b\u540e\uff0c\u60a8\u8fd4\u56de\u4e00\u4e2a\u54cd\u5e94\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u60a8\u53ef\u80fd\u4f1a\u91cd\u5b9a\u5411\u5230\u65b0\u521b\u5efa\u7684\u9879\u76ee\u3002\u4e00\u4e2a remix \u64cd\u4f5c\u53ef\u80fd\u770b\u8d77\u6765\u50cf\u8fd9\u6837\uff1a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-tsx",metastring:"filename=app/routes/projects.tsx",children:"export async function action({\n  request,\n}: ActionFunctionArgs) {\n  const body = await request.formData();\n  const project = await createProject(body);\n  return redirect(`/projects/${project.id}`);\n}\n"})}),"\n",(0,t.jsxs)(e.p,{children:["\u6d4f\u89c8\u5668\u4ece ",(0,t.jsx)(e.code,{children:"/projects/new"})," \u5f00\u59cb\uff0c\u7136\u540e\u5c06\u8868\u5355\u6570\u636e\u4ee5\u8bf7\u6c42\u7684\u65b9\u5f0f\u63d0\u4ea4\u5230 ",(0,t.jsx)(e.code,{children:"/projects"}),"\uff0c\u63a5\u7740\u670d\u52a1\u5668\u5c06\u6d4f\u89c8\u5668\u91cd\u5b9a\u5411\u5230 ",(0,t.jsx)(e.code,{children:"/projects/123"}),"\u3002\u5728\u8fd9\u4e00\u5207\u53d1\u751f\u7684\u540c\u65f6\uff0c\u6d4f\u89c8\u5668\u8fdb\u5165\u6b63\u5e38\u7684\u201c\u52a0\u8f7d\u201d\u72b6\u6001\uff1a\u5730\u5740\u8fdb\u5ea6\u6761\u586b\u6ee1\uff0c\u7f51\u7ad9\u56fe\u6807\u53d8\u6210\u65cb\u8f6c\u7684\u56fe\u6807\uff0c\u7b49\u7b49\u3002\u8fd9\u5b9e\u9645\u4e0a\u63d0\u4f9b\u4e86\u4e00\u4e2a\u4e0d\u9519\u7684\u7528\u6237\u4f53\u9a8c\u3002"]}),"\n",(0,t.jsx)(e.p,{children:"\u5982\u679c\u60a8\u662f\u7f51\u7edc\u5f00\u53d1\u7684\u65b0\u624b\uff0c\u60a8\u53ef\u80fd\u4ece\u672a\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u4f7f\u7528\u8fc7\u8868\u5355\u3002\u5f88\u591a\u4eba\u4e00\u76f4\u90fd\u662f\u8fd9\u6837\u505a\u7684\uff1a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-html",children:"<form onSubmit={(event) => { event.preventDefault(); // \u795d\u597d\u8fd0\uff01 }} />\n"})}),"\n",(0,t.jsx)(e.p,{children:"\u5982\u679c\u60a8\u662f\u8fd9\u6837\u7684\u4eba\uff0c\u5f53\u60a8\u770b\u5230\u53ea\u9700\u4f7f\u7528\u6d4f\u89c8\u5668\uff08\u548c Remix\uff09\u5185\u7f6e\u529f\u80fd\u65f6\uff0c\u53d8\u66f4\u662f\u591a\u4e48\u7b80\u5355\uff0c\u60a8\u4e00\u5b9a\u4f1a\u611f\u5230\u9ad8\u5174\uff01"}),"\n",(0,t.jsx)(e.h2,{id:"remix-mutation-start-to-finish",children:"Remix Mutation, Start to Finish"}),"\n",(0,t.jsx)(e.p,{children:"\u6211\u4eec\u5c06\u4ece\u5934\u5230\u5c3e\u6784\u5efa\u4e00\u4e2a mutation\uff0c\u5305\u542b\uff1a"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsx)(e.li,{children:"\u53ef\u9009\u7684 JavaScript"}),"\n",(0,t.jsx)(e.li,{children:"\u9a8c\u8bc1"}),"\n",(0,t.jsx)(e.li,{children:"\u9519\u8bef\u5904\u7406"}),"\n",(0,t.jsx)(e.li,{children:"\u6e10\u8fdb\u589e\u5f3a\u7684\u52a0\u8f7d\u6307\u793a\u5668"}),"\n",(0,t.jsx)(e.li,{children:"\u6e10\u8fdb\u589e\u5f3a\u7684\u9519\u8bef\u663e\u793a"}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:["\u4f60\u53ef\u4ee5\u50cf\u4f7f\u7528 HTML \u8868\u5355\u4e00\u6837\u4f7f\u7528 Remix \u7684 ",(0,t.jsx)(e.code,{children:"<Form>"})," \u7ec4\u4ef6\u8fdb\u884c\u6570\u636e\u53d8\u66f4\u3002\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\uff0c\u73b0\u5728\u4f60\u53ef\u4ee5\u8bbf\u95ee\u5f85\u5904\u7406\u8868\u5355\u72b6\u6001\uff0c\u4ee5\u6784\u5efa\u66f4\u597d\u7684\u7528\u6237\u4f53\u9a8c\uff1a\u6bd4\u5982\u4e0a\u4e0b\u6587\u52a0\u8f7d\u6307\u793a\u5668\u548c\u201c\u4e50\u89c2 UI\u201d\u3002"]}),"\n",(0,t.jsxs)(e.p,{children:["\u65e0\u8bba\u4f60\u4f7f\u7528 ",(0,t.jsx)(e.code,{children:"<form>"})," \u8fd8\u662f ",(0,t.jsx)(e.code,{children:"<Form>"}),"\uff0c\u4f60\u7f16\u5199\u7684\u4ee3\u7801\u90fd\u662f\u5b8c\u5168\u76f8\u540c\u7684\u3002\u4f60\u53ef\u4ee5\u4ece ",(0,t.jsx)(e.code,{children:"<form>"})," \u5f00\u59cb\uff0c\u7136\u540e\u5c06\u5176\u5347\u7ea7\u4e3a ",(0,t.jsx)(e.code,{children:"<Form>"}),"\uff0c\u800c\u65e0\u9700\u66f4\u6539\u4efb\u4f55\u5185\u5bb9\u3002\u4e4b\u540e\uff0c\u6dfb\u52a0\u7279\u6b8a\u7684\u52a0\u8f7d\u6307\u793a\u5668\u548c\u4e50\u89c2 UI\u3002\u7136\u800c\uff0c\u5982\u679c\u4f60\u89c9\u5f97\u4e0d\u592a\u6709\u628a\u63e1\uff0c\u6216\u8005\u65f6\u95f4\u7d27\u8feb\uff0c\u53ea\u9700\u4f7f\u7528 ",(0,t.jsx)(e.code,{children:"<form>"}),"\uff0c\u8ba9\u6d4f\u89c8\u5668\u5904\u7406\u7528\u6237\u53cd\u9988\uff01Remix \u7684 ",(0,t.jsx)(e.code,{children:"<Form>"})," \u662f\u5bf9 mutation \u7684\u201c\u6e10\u8fdb\u589e\u5f3a\u201d\u7684\u5b9e\u73b0\u3002"]}),"\n",(0,t.jsx)(e.h3,{id:"\u6784\u5efa\u8868\u5355",children:"\u6784\u5efa\u8868\u5355"}),"\n",(0,t.jsx)(e.p,{children:"\u8ba9\u6211\u4eec\u4ece\u4e4b\u524d\u7684\u9879\u76ee\u8868\u5355\u5f00\u59cb\uff0c\u4f46\u4f7f\u5176\u53ef\u7528\uff1a"}),"\n",(0,t.jsxs)(e.p,{children:["\u5047\u8bbe\u4f60\u6709\u4e00\u4e2a\u8def\u7531 ",(0,t.jsx)(e.code,{children:"app/routes/projects.new.tsx"}),"\uff0c\u5176\u4e2d\u5305\u542b\u4ee5\u4e0b\u8868\u5355\uff1a"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-tsx",metastring:"filename=app/routes/projects.new.tsx",children:'export default function NewProject() {\n  return (\n    <form method="post" action="/projects/new">\n      <p>\n        <label>\n          Name: <input name="name" type="text" />\n        </label>\n      </p>\n      <p>\n        <label>\n          Description:\n          <br />\n          <textarea name="description" />\n        </label>\n      </p>\n      <p>\n        <button type="submit">Create</button>\n      </p>\n    </form>\n  );\n}\n'})}),"\n",(0,t.jsxs)(e.p,{children:["\u73b0\u5728\u6dfb\u52a0\u8def\u7531\u52a8\u4f5c\u3002\u4efb\u4f55\u201cpost\u201d\u7684\u8868\u5355\u63d0\u4ea4\u5c06\u8c03\u7528\u4f60\u7684\u6570\u636e\u201caction\u201d\u3002\u4efb\u4f55\u201cget\u201d\u63d0\u4ea4\uff08",(0,t.jsx)(e.code,{children:'<Form method="get">'}),"\uff09\u5c06\u7531\u4f60\u7684\u201cloader\u201d\u5904\u7406\u3002"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-tsx",metastring:"lines=[1,5-11]",children:'import type { ActionFunctionArgs } from "@remix-run/node"; // or cloudflare/deno\nimport { redirect } from "@remix-run/node"; // or cloudflare/deno\n\n// \u6ce8\u610f\u201caction\u201d\u5bfc\u51fa\u540d\u79f0\uff0c\u8fd9\u5c06\u5904\u7406\u6211\u4eec\u7684\u8868\u5355 POST\nexport const action = async ({\n  request,\n}: ActionFunctionArgs) => {\n  const formData = await request.formData();\n  const project = await createProject(formData);\n  return redirect(`/projects/${project.id}`);\n};\n\nexport default function NewProject() {\n  // ... \u548c\u4e4b\u524d\u4e00\u6837\n}\n'})}),"\n",(0,t.jsxs)(e.p,{children:["\u5c31\u8fd9\u6837\uff01\u5047\u8bbe ",(0,t.jsx)(e.code,{children:"createProject"})," \u505a\u4e86\u6211\u4eec\u60f3\u8981\u7684\u4e8b\u60c5\uff0c\u8fd9\u5c31\u662f\u4f60\u9700\u8981\u505a\u7684\u3002\u8bf7\u6ce8\u610f\uff0c\u65e0\u8bba\u4f60\u8fc7\u53bb\u6784\u5efa\u4e86\u4ec0\u4e48\u6837\u7684\u5355\u9875\u9762\u5e94\u7528\uff0c\u4f60\u59cb\u7ec8\u9700\u8981\u4e00\u4e2a\u670d\u52a1\u5668\u7aef\u7684\u52a8\u4f5c\u548c\u4e00\u4e2a\u8868\u5355\u6765\u83b7\u53d6\u7528\u6237\u6570\u636e\u3002\u4e0e Remix \u7684\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e ",(0,t.jsx)(e.strong,{children:"\u8fd9\u5c31\u662f\u4f60\u6240\u9700\u8981\u7684\u5168\u90e8"}),"\uff08\u8fd9\u4e5f\u662f\u8fc7\u53bb\u7f51\u9875\u7684\u6837\u5b50\uff09\u3002"]}),"\n",(0,t.jsx)(e.p,{children:"\u5f53\u7136\uff0c\u6211\u4eec\u5f00\u59cb\u590d\u6742\u5316\u4e8b\u60c5\uff0c\u4ee5\u8bd5\u56fe\u521b\u9020\u6bd4\u9ed8\u8ba4\u6d4f\u89c8\u5668\u884c\u4e3a\u66f4\u597d\u7684\u7528\u6237\u4f53\u9a8c\u3002\u7ee7\u7eed\u524d\u8fdb\uff0c\u6211\u4eec\u4f1a\u5230\u8fbe\u90a3\u91cc\uff0c\u4f46\u6211\u4eec\u4e0d\u9700\u8981\u66f4\u6539\u4efb\u4f55\u5df2\u7ecf\u7f16\u5199\u7684\u4ee3\u7801\u6765\u83b7\u5f97\u6838\u5fc3\u529f\u80fd\u3002"}),"\n",(0,t.jsx)(e.h3,{id:"\u8868\u5355\u9a8c\u8bc1",children:"\u8868\u5355\u9a8c\u8bc1"}),"\n",(0,t.jsx)(e.p,{children:"\u540c\u65f6\u8fdb\u884c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u7aef\u7684\u8868\u5355\u9a8c\u8bc1\u662f\u5f88\u5e38\u89c1\u7684\u3002\u4e0d\u5e78\u7684\u662f\uff0c\u53ea\u6709\u8fdb\u884c\u5ba2\u6237\u7aef\u9a8c\u8bc1\u7684\u60c5\u51b5\u4e5f\u5f88\u5e38\u89c1\uff0c\u8fd9\u4f1a\u5bfc\u81f4\u6570\u636e\u51fa\u73b0\u5404\u79cd\u95ee\u9898\uff0c\u6211\u4eec\u73b0\u5728\u6ca1\u6709\u65f6\u95f4\u6df1\u5165\u8ba8\u8bba\u3002\u5173\u952e\u662f\uff0c\u5982\u679c\u4f60\u53ea\u5728\u4e00\u4e2a\u5730\u65b9\u8fdb\u884c\u9a8c\u8bc1\uff0c\u90a3\u5c31\u9009\u62e9\u5728\u670d\u52a1\u5668\u4e0a\u8fdb\u884c\u3002\u5728\u4f7f\u7528 Remix \u65f6\uff0c\u4f60\u4f1a\u53d1\u73b0\u8fd9\u662f\u4f60\u552f\u4e00\u5173\u5fc3\u7684\u5730\u65b9\uff08\u53d1\u9001\u5230\u6d4f\u89c8\u5668\u7684\u5185\u5bb9\u8d8a\u5c11\u8d8a\u597d\uff01\uff09\u3002"}),"\n",(0,t.jsx)(e.p,{children:"\u6211\u4eec\u77e5\u9053\uff0c\u4f60\u60f3\u8981\u6f02\u4eae\u7684\u9a8c\u8bc1\u9519\u8bef\u52a8\u753b\u4e4b\u7c7b\u7684\u4e1c\u897f\u3002\u6211\u4eec\u4f1a\u8ba8\u8bba\u8fd9\u4e2a\u3002\u4f46\u73b0\u5728\u6211\u4eec\u53ea\u662f\u6784\u5efa\u4e00\u4e2a\u57fa\u672c\u7684 HTML \u8868\u5355\u548c\u7528\u6237\u6d41\u7a0b\u3002\u6211\u4eec\u5148\u4fdd\u6301\u7b80\u5355\uff0c\u7136\u540e\u518d\u8ba9\u5b83\u53d8\u5f97\u534e\u4e3d\u3002"}),"\n",(0,t.jsx)(e.p,{children:"\u5728\u6211\u4eec\u7684 action \u4e2d\uff0c\u4e5f\u8bb8\u6211\u4eec\u6709\u4e00\u4e2a API \u8fd4\u56de\u8fd9\u6837\u7684\u9a8c\u8bc1\u9519\u8bef\u3002"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-tsx",children:"const [errors, project] = await createProject(formData);\n"})}),"\n",(0,t.jsx)(e.p,{children:"\u5982\u679c\u6709\u9a8c\u8bc1\u9519\u8bef\uff0c\u6211\u4eec\u5e0c\u671b\u8fd4\u56de\u8868\u5355\u5e76\u663e\u793a\u5b83\u4eec\u3002"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-tsx",metastring:"lines=[1,7,9-12]",children:'import { json, redirect } from "@remix-run/node"; // or cloudflare/deno\n\nexport const action = async ({\n  request,\n}: ActionFunctionArgs) => {\n  const formData = await request.formData();\n  const [errors, project] = await createProject(formData);\n\n  if (errors) {\n    const values = Object.fromEntries(formData);\n    return json({ errors, values });\n  }\n\n  return redirect(`/projects/${project.id}`);\n};\n'})}),"\n",(0,t.jsxs)(e.p,{children:["\u5c31\u50cf ",(0,t.jsx)(e.code,{children:"useLoaderData"})," \u8fd4\u56de ",(0,t.jsx)(e.code,{children:"loader"})," \u7684\u503c\u4e00\u6837\uff0c",(0,t.jsx)(e.code,{children:"useActionData"})," \u5c06\u8fd4\u56de\u6765\u81ea action \u7684\u6570\u636e\u3002\u53ea\u6709\u5728\u5bfc\u822a\u662f\u8868\u5355\u63d0\u4ea4\u65f6\uff0c\u5b83\u624d\u4f1a\u5b58\u5728\uff0c\u56e0\u6b64\u4f60\u603b\u662f\u9700\u8981\u68c0\u67e5\u662f\u5426\u5f97\u5230\u4e86\u5b83\u3002"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-tsx",metastring:"lines=[3,12,22,27-31,39,44-48]",children:'import type { ActionFunctionArgs } from "@remix-run/node"; // or cloudflare/deno\nimport { json, redirect } from "@remix-run/node"; // or cloudflare/deno\nimport { useActionData } from "@remix-run/react";\n\nexport const action = async ({\n  request,\n}: ActionFunctionArgs) => {\n  // ...\n};\n\nexport default function NewProject() {\n  const actionData = useActionData<typeof action>();\n\n  return (\n    <form method="post" action="/projects/new">\n      <p>\n        <label>\n          \u540d\u79f0:{" "}\n          <input\n            name="name"\n            type="text"\n            defaultValue={actionData?.values.name}\n          />\n        </label>\n      </p>\n\n      {actionData?.errors.name ? (\n        <p style={{ color: "red" }}>\n          {actionData.errors.name}\n        </p>\n      ) : null}\n\n      <p>\n        <label>\n          \u63cf\u8ff0:\n          <br />\n          <textarea\n            name="description"\n            defaultValue={actionData?.values.description}\n          />\n        </label>\n      </p>\n\n      {actionData?.errors.description ? (\n        <p style={{ color: "red" }}>\n          {actionData.errors.description}\n        </p>\n      ) : null}\n\n      <p>\n        <button type="submit">\u521b\u5efa</button>\n      </p>\n    </form>\n  );\n}\n'})}),"\n",(0,t.jsxs)(e.p,{children:["\u6ce8\u610f\u6211\u4eec\u5982\u4f55\u4e3a\u6240\u6709\u8f93\u5165\u6dfb\u52a0 ",(0,t.jsx)(e.code,{children:"defaultValue"}),"\u3002\u8bb0\u4f4f\uff0c\u8fd9\u53ea\u662f\u666e\u901a\u7684 HTML ",(0,t.jsx)(e.code,{children:"<form>"}),"\uff0c\u6240\u4ee5\u53ea\u662f\u6b63\u5e38\u7684\u6d4f\u89c8\u5668/\u670d\u52a1\u5668\u4ea4\u4e92\u3002\u6211\u4eec\u4ece\u670d\u52a1\u5668\u83b7\u53d6\u503c\uff0c\u8fd9\u6837\u7528\u6237\u5c31\u4e0d\u5fc5\u91cd\u65b0\u8f93\u5165\u4ed6\u4eec\u4e4b\u524d\u8f93\u5165\u7684\u5185\u5bb9\u3002"]}),"\n",(0,t.jsx)(e.p,{children:"\u4f60\u53ef\u4ee5\u539f\u6837\u53d1\u5e03\u8fd9\u6bb5\u4ee3\u7801\u3002\u6d4f\u89c8\u5668\u4f1a\u4e3a\u4f60\u5904\u7406\u5f85\u5904\u7406\u7684 UI \u548c\u4e2d\u65ad\u3002\u795d\u4f60\u5468\u672b\u6109\u5feb\uff0c\u5468\u4e00\u518d\u8ba9\u5b83\u53d8\u5f97\u534e\u4e3d\u3002"}),"\n",(0,t.jsxs)(e.h3,{id:"\u5c06-form-\u5347\u7ea7\u4e3a-form-\u5e76\u6dfb\u52a0\u5f85\u5904\u7406-ui",children:["\u5c06 ",(0,t.jsx)(e.code,{children:"<form>"})," \u5347\u7ea7\u4e3a ",(0,t.jsx)(e.code,{children:"<Form>"})," \u5e76\u6dfb\u52a0\u5f85\u5904\u7406 UI"]}),"\n",(0,t.jsxs)(e.p,{children:["\u8ba9\u6211\u4eec\u4f7f\u7528\u6e10\u8fdb\u589e\u5f3a\u4f7f\u8fd9\u4e2a\u7528\u6237\u4f53\u9a8c\u53d8\u5f97\u66f4\u52a0\u7cbe\u81f4\u3002\u901a\u8fc7\u5c06\u5176\u4ece ",(0,t.jsx)(e.code,{children:"<form>"})," \u66f4\u6539\u4e3a ",(0,t.jsx)(e.code,{children:"<Form>"}),"\uff0cRemix \u5c06\u6a21\u62df\u6d4f\u89c8\u5668\u884c\u4e3a\u5e76\u4f7f\u7528 ",(0,t.jsx)(e.code,{children:"fetch"}),"\u3002\u8fd9\u4e5f\u5c06\u4f7f\u60a8\u80fd\u591f\u8bbf\u95ee\u5f85\u5904\u7406\u7684\u8868\u5355\u6570\u636e\uff0c\u4ee5\u4fbf\u6784\u5efa\u5f85\u5904\u7406 UI\u3002"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-tsx",metastring:"lines=[2,11]",children:'import { json, redirect } from "@remix-run/node"; // or cloudflare/deno\nimport { useActionData, Form } from "@remix-run/react";\n\n// ...\n\nexport default function NewProject() {\n  const actionData = useActionData<typeof action>();\n\n  return (\n    // \u6ce8\u610f\u5927\u5199\u7684 "F" <Form> \u73b0\u5728\n    <Form method="post">{/* ... */}</Form>\n  );\n}\n'})}),"\n",(0,t.jsx)("docs-error",{children:"\u7b49\u4e00\u4e0b\uff01\u5982\u679c\u60a8\u53ea\u662f\u5c06\u8868\u5355\u66f4\u6539\u4e3a Form\uff0c\u60a8\u5c06\u4f7f\u7528\u6237\u4f53\u9a8c\u53d8\u5f97\u7a0d\u5fae\u7cdf\u7cd5\u4e00\u4e9b\uff01"}),"\n",(0,t.jsxs)(e.p,{children:["\u5982\u679c\u60a8\u6ca1\u6709\u65f6\u95f4\u6216\u52a8\u529b\u5b8c\u6210\u8fd9\u91cc\u7684\u5176\u4f59\u5de5\u4f5c\uff0c\u8bf7\u4f7f\u7528 ",(0,t.jsx)(e.code,{children:"<Form reloadDocument>"}),"\u3002\u8fd9\u5141\u8bb8\u6d4f\u89c8\u5668\u7ee7\u7eed\u5904\u7406\u5f85\u5904\u7406 UI \u72b6\u6001\uff08\u6807\u7b7e\u9875\u7684 favicon \u4e2d\u7684\u52a0\u8f7d\u52a8\u753b\uff0c\u5730\u5740\u680f\u4e2d\u7684\u8fdb\u5ea6\u6761\u7b49\uff09\u3002\u5982\u679c\u60a8\u53ea\u662f\u4f7f\u7528 ",(0,t.jsx)(e.code,{children:"<Form>"})," \u800c\u6ca1\u6709\u5b9e\u73b0\u5f85\u5904\u7406 UI\uff0c\u5f53\u7528\u6237\u63d0\u4ea4\u8868\u5355\u65f6\uff0c\u4ed6\u4eec\u5c06\u4e0d\u77e5\u9053\u53d1\u751f\u4e86\u4ec0\u4e48\u3002"]}),"\n",(0,t.jsxs)("docs-info",{children:["\u6211\u4eec\u5efa\u8bae\u59cb\u7ec8\u4f7f\u7528\u5927\u5199\u7684 F Form\uff0c\u5982\u679c\u60a8\u5e0c\u671b\u8ba9\u6d4f\u89c8\u5668\u5904\u7406\u5f85\u5904\u7406 UI\uff0c\u8bf7\u4f7f\u7528 ",(0,t.jsx)("code",{children:"<Form reloadDocument>"})," \u5c5e\u6027\u3002"]}),"\n",(0,t.jsxs)(e.p,{children:["\u73b0\u5728\u8ba9\u6211\u4eec\u6dfb\u52a0\u4e00\u4e9b\u5f85\u5904\u7406 UI\uff0c\u4ee5\u4fbf\u7528\u6237\u5728\u63d0\u4ea4\u65f6\u77e5\u9053\u53d1\u751f\u4e86\u4ec0\u4e48\u3002\u8fd9\u91cc\u6709\u4e00\u4e2a\u540d\u4e3a ",(0,t.jsx)(e.code,{children:"useNavigation"})," \u7684\u94a9\u5b50\u3002\u5f53\u6709\u5f85\u5904\u7406\u7684\u8868\u5355\u63d0\u4ea4\u65f6\uff0cRemix \u5c06\u4e3a\u60a8\u63d0\u4f9b\u8868\u5355\u7684\u5e8f\u5217\u5316\u7248\u672c\u4f5c\u4e3a ",(0,t.jsx)("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/FormData",children:(0,t.jsx)(e.code,{children:"FormData"})})," \u5bf9\u8c61\u3002\u60a8\u6700\u611f\u5174\u8da3\u7684\u662f ",(0,t.jsx)("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/FormData/get",children:(0,t.jsx)(e.code,{children:"formData.get()"})})," \u65b9\u6cd5\u3002"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-tsx",metastring:"lines=[5,13,19,65-67]",children:'import { json, redirect } from "@remix-run/node"; // or cloudflare/deno\nimport {\n  useActionData,\n  Form,\n  useNavigation,\n} from "@remix-run/react";\n\n// ...\n\nexport default function NewProject() {\n  // \u5f53\u8868\u5355\u5728\u670d\u52a1\u5668\u4e0a\u88ab\u5904\u7406\u65f6\uff0c\u8fd9\u5c06\u8fd4\u56de\u4e0d\u540c\u7684\n  // \u5bfc\u822a\u72b6\u6001\uff0c\u4ee5\u5e2e\u52a9\u6211\u4eec\u6784\u5efa\u5f85\u5904\u7406\u548c\u4e50\u89c2\u7684 UI\u3002\n  const navigation = useNavigation();\n  const actionData = useActionData<typeof action>();\n\n  return (\n    <Form method="post">\n      <fieldset\n        disabled={navigation.state === "submitting"}\n      >\n        <p>\n          <label>\n            \u540d\u79f0\uff1a{" "}\n            <input\n              name="name"\n              type="text"\n              defaultValue={\n                actionData\n                  ? actionData.values.name\n                  : undefined\n              }\n            />\n          </label>\n        </p>\n\n        {actionData && actionData.errors.name ? (\n          <p style={{ color: "red" }}>\n            {actionData.errors.name}\n          </p>\n        ) : null}\n\n        <p>\n          <label>\n            \u63cf\u8ff0\uff1a\n            <br />\n            <textarea\n              name="description"\n              defaultValue={\n                actionData\n                  ? actionData.values.description\n                  : undefined\n              }\n            />\n          </label>\n        </p>\n\n        {actionData && actionData.errors.description ? (\n          <p style={{ color: "red" }}>\n            {actionData.errors.description}\n          </p>\n        ) : null}\n\n        <p>\n          <button type="submit">\n            {navigation.state === "submitting"\n              ? "\u6b63\u5728\u521b\u5efa..."\n              : "\u521b\u5efa"}\n          </button>\n        </p>\n      </fieldset>\n    </Form>\n  );\n}\n'})}),"\n",(0,t.jsx)(e.p,{children:"\u975e\u5e38\u4e0d\u9519\uff01\u73b0\u5728\u5f53\u7528\u6237\u70b9\u51fb\u201c\u521b\u5efa\u201d\u65f6\uff0c\u8f93\u5165\u6846\u4f1a\u88ab\u7981\u7528\uff0c\u63d0\u4ea4\u6309\u94ae\u7684\u6587\u672c\u4f1a\u6539\u53d8\u3002\u7531\u4e8e\u73b0\u5728\u53ea\u53d1\u751f\u4e00\u6b21\u7f51\u7edc\u8bf7\u6c42\u800c\u4e0d\u662f\u5b8c\u5168\u91cd\u65b0\u52a0\u8f7d\u9875\u9762\uff08\u8fd9\u53ef\u80fd\u6d89\u53ca\u66f4\u591a\u7684\u7f51\u7edc\u8bf7\u6c42\uff0c\u4ece\u6d4f\u89c8\u5668\u7f13\u5b58\u8bfb\u53d6\u8d44\u4ea7\uff0c\u89e3\u6790 JavaScript\uff0c\u89e3\u6790 CSS \u7b49\uff09\uff0c\u6574\u4e2a\u64cd\u4f5c\u4e5f\u5e94\u8be5\u66f4\u5feb\u3002"}),"\n",(0,t.jsxs)(e.p,{children:["\u6211\u4eec\u5728\u8fd9\u4e2a\u9875\u9762\u4e0a\u6ca1\u6709\u5bf9 ",(0,t.jsx)(e.code,{children:"navigation"})," \u505a\u592a\u591a\uff0c\u4f46\u5b83\u5305\u542b\u4e86\u5173\u4e8e\u63d0\u4ea4\u7684\u6240\u6709\u4fe1\u606f\uff08",(0,t.jsx)(e.code,{children:"navigation.formMethod"}),"\uff0c",(0,t.jsx)(e.code,{children:"navigation.formAction"}),"\uff0c",(0,t.jsx)(e.code,{children:"navigation.formEncType"}),"\uff09\uff0c\u4ee5\u53ca\u6240\u6709\u5728\u670d\u52a1\u5668\u4e0a\u5904\u7406\u7684\u503c\u5728 ",(0,t.jsx)(e.code,{children:"navigation.formData"})," \u4e2d\u3002"]}),"\n",(0,t.jsx)(e.h3,{id:"\u5728\u9a8c\u8bc1\u9519\u8bef\u4e2d\u52a8\u753b\u6548\u679c",children:"\u5728\u9a8c\u8bc1\u9519\u8bef\u4e2d\u52a8\u753b\u6548\u679c"}),"\n",(0,t.jsx)(e.p,{children:"\u73b0\u5728\u6211\u4eec\u4f7f\u7528 JavaScript \u63d0\u4ea4\u6b64\u9875\u9762\uff0c\u56e0\u6b64\u6211\u4eec\u7684\u9a8c\u8bc1\u9519\u8bef\u53ef\u4ee5\u901a\u8fc7\u52a8\u753b\u6548\u679c\u5448\u73b0\uff0c\u56e0\u4e3a\u9875\u9762\u662f\u6709\u72b6\u6001\u7684\u3002\u9996\u5148\uff0c\u6211\u4eec\u5c06\u5236\u4f5c\u4e00\u4e2a\u534e\u4e3d\u7684\u7ec4\u4ef6\uff0c\u8be5\u7ec4\u4ef6\u53ef\u4ee5\u52a8\u753b\u5316\u9ad8\u5ea6\u548c\u4e0d\u900f\u660e\u5ea6\uff1a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-tsx",children:'function ValidationMessage({ error, isSubmitting }) {\n  const [show, setShow] = useState(!!error);\n\n  useEffect(() => {\n    const id = setTimeout(() => {\n      const hasError = !!error;\n      setShow(hasError && !isSubmitting);\n    });\n    return () => clearTimeout(id);\n  }, [error, isSubmitting]);\n\n  return (\n    <div\n      style={{\n        opacity: show ? 1 : 0,\n        height: show ? "1em" : 0,\n        color: "red",\n        transition: "all 300ms ease-in-out",\n      }}\n    >\n      {error}\n    </div>\n  );\n}\n'})}),"\n",(0,t.jsx)(e.p,{children:"\u73b0\u5728\u6211\u4eec\u53ef\u4ee5\u5c06\u65e7\u7684\u9519\u8bef\u6d88\u606f\u5305\u88f9\u5728\u8fd9\u4e2a\u65b0\u7684\u534e\u4e3d\u7ec4\u4ef6\u4e2d\uff0c\u751a\u81f3\u53ef\u4ee5\u5c06\u6709\u9519\u8bef\u7684\u5b57\u6bb5\u7684\u8fb9\u6846\u53d8\u4e3a\u7ea2\u8272\uff1a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-tsx",metastring:"lines=[21-24,31-34,44-48,53-56]",children:'export default function NewProject() {\n  const navigation = useNavigation();\n  const actionData = useActionData<typeof action>();\n\n  return (\n    <Form method="post">\n      <fieldset\n        disabled={navigation.state === "submitting"}\n      >\n        <p>\n          <label>\n            \u540d\u79f0:{" "}\n            <input\n              name="name"\n              type="text"\n              defaultValue={\n                actionData\n                  ? actionData.values.name\n                  : undefined\n              }\n              style={{\n                borderColor: actionData?.errors.name\n                  ? "red"\n                  : "",\n              }}\n            />\n          </label>\n        </p>\n\n        {actionData?.errors.name ? (\n          <ValidationMessage\n            isSubmitting={navigation.state === "submitting"}\n            error={actionData?.errors?.name}\n          />\n        ) : null}\n\n        <p>\n          <label>\n            \u63cf\u8ff0:\n            <br />\n            <textarea\n              name="description"\n              defaultValue={actionData?.values.description}\n              style={{\n                borderColor: actionData?.errors.description\n                  ? "red"\n                  : "",\n              }}\n            />\n          </label>\n        </p>\n\n        <ValidationMessage\n          isSubmitting={navigation.state === "submitting"}\n          error={actionData?.errors.description}\n        />\n\n        <p>\n          <button type="submit">\n            {navigation.state === "submitting"\n              ? "\u6b63\u5728\u521b\u5efa..."\n              : "\u521b\u5efa"}\n          </button>\n        </p>\n      </fieldset>\n    </Form>\n  );\n}\n'})}),"\n",(0,t.jsx)(e.p,{children:"\u592a\u68d2\u4e86\uff01\u534e\u4e3d\u7684\u7528\u6237\u754c\u9762\uff0c\u65e0\u9700\u66f4\u6539\u4e0e\u670d\u52a1\u5668\u901a\u4fe1\u7684\u4efb\u4f55\u5185\u5bb9\u3002\u5b83\u8fd8\u5bf9\u963b\u6b62 JavaScript \u52a0\u8f7d\u7684\u7f51\u7edc\u6761\u4ef6\u5177\u6709\u5f39\u6027\u3002"}),"\n",(0,t.jsx)(e.h3,{id:"\u56de\u987e",children:"\u56de\u987e"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"\u9996\u5148\uff0c\u6211\u4eec\u6784\u5efa\u4e86\u4e00\u4e2a\u6ca1\u6709\u8003\u8651 JavaScript \u7684\u9879\u76ee\u8868\u5355\u3002\u4e00\u4e2a\u7b80\u5355\u7684\u8868\u5355\uff0c\u63d0\u4ea4\u5230\u670d\u52a1\u5668\u7aef\u7684\u64cd\u4f5c\u3002\u6b22\u8fce\u6765\u5230 1998 \u5e74\u3002"}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:["\u4e00\u65e6\u8fd9\u9879\u5de5\u4f5c\u5b8c\u6210\uff0c\u6211\u4eec\u4f7f\u7528 JavaScript \u901a\u8fc7\u5c06 ",(0,t.jsx)(e.code,{children:"<form>"})," \u66f4\u6539\u4e3a ",(0,t.jsx)(e.code,{children:"<Form>"})," \u6765\u63d0\u4ea4\u8868\u5355\uff0c\u4f46\u6211\u4eec\u4e0d\u9700\u8981\u505a\u5176\u4ed6\u4efb\u4f55\u4e8b\u60c5\uff01"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"\u73b0\u5728\u6709\u4e86\u4e00\u4e2a\u6709\u72b6\u6001\u7684\u9875\u9762\u548c React\uff0c\u6211\u4eec\u901a\u8fc7\u7b80\u5355\u5730\u8bf7\u6c42 Remix \u83b7\u53d6\u5bfc\u822a\u72b6\u6001\uff0c\u6dfb\u52a0\u4e86\u52a0\u8f7d\u6307\u793a\u5668\u548c\u9a8c\u8bc1\u9519\u8bef\u7684\u52a8\u753b\u3002"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:["\u4ece\u60a8\u7684\u7ec4\u4ef6\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u53d1\u751f\u7684\u4e8b\u60c5\u53ea\u662f ",(0,t.jsx)(e.code,{children:"useNavigation"})," \u94a9\u5b50\u5728\u8868\u5355\u63d0\u4ea4\u65f6\u5bfc\u81f4\u4e86\u72b6\u6001\u66f4\u65b0\uff0c\u7136\u540e\u5728\u6570\u636e\u8fd4\u56de\u65f6\u53c8\u8fdb\u884c\u4e86\u53e6\u4e00\u6b21\u72b6\u6001\u66f4\u65b0\u3002\u5f53\u7136\uff0c\u5728 Remix \u5185\u90e8\u53d1\u751f\u4e86\u66f4\u591a\u4e8b\u60c5\uff0c\u4f46\u5c31\u60a8\u7684\u7ec4\u4ef6\u800c\u8a00\uff0c\u5c31\u662f\u8fd9\u6837\u3002\u4ec5\u4ec5\u662f\u51e0\u4e2a\u72b6\u6001\u66f4\u65b0\u3002\u8fd9\u4f7f\u5f97\u88c5\u9970\u4efb\u4f55\u7528\u6237\u6d41\u7a0b\u53d8\u5f97\u975e\u5e38\u7b80\u5355\u3002"]}),"\n",(0,t.jsx)(e.h2,{id:"\u53e6\u89c1",children:"\u53e6\u89c1"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"../components/form",children:"\u8868\u5355"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"../hooks/use-navigation",children:"\u4f7f\u7528\u5bfc\u822a"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"../route/action",children:"\u64cd\u4f5c"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"../route/loader",children:"\u52a0\u8f7d\u5668"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"../hooks/use-submit",children:(0,t.jsx)(e.code,{children:"useSubmit()"})})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"../hooks/use-fetcher",children:(0,t.jsx)(e.code,{children:"useFetcher()"})})}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}},8453:(n,e,r)=>{r.d(e,{R:()=>s,x:()=>a});var t=r(6540);const i={},o=t.createContext(i);function s(n){const e=t.useContext(o);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:s(n.components),t.createElement(o.Provider,{value:e},n.children)}}}]);